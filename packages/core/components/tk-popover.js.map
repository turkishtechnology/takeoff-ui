{"file":"tk-popover.js","mappings":"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","names":["TkPopover","__stencil_proxyCustomElement","HTMLElement"],"sources":["src/components/tk-popover/tk-popover.scss?tag=tk-popover&encapsulation=shadow","src/components/tk-popover/tk-popover.tsx"],"sourcesContent":[".tk-popover-content {\n  display: flex;\n  gap: 8px;\n  position: fixed;\n  padding: var(--tooltips-base-v-padding) var(--tooltips-base-h-padding);\n  border-radius: var(--tooltips-base-radius, 8px);\n  width: max-content;\n  color: var(--text-base);\n  line-height: 20px;\n  z-index: 1300;\n  box-shadow: var(--shadow-base);\n\n  &.tk-popover-dark {\n    border: 1px solid var(--border-light);\n    background: var(--background-darkest);\n\n    .tk-popover-arrow {\n      background: var(--background-darkest);\n    }\n  }\n\n  &.tk-popover-white {\n    border: 1px solid var(--border-light);\n    background: var(--static-light);\n\n    .tk-popover-arrow {\n      background: var(--static-light);\n    }\n  }\n\n  &.tk-popover-basic {\n    border: 1px solid var(--states-light);\n    background: var(--background-lightest);\n\n    .tk-popover-arrow {\n      background: var(--background-lightest);\n    }\n  }\n}\n\n.tk-popover-arrow {\n  position: absolute;\n  width: 9px;\n  height: 9px;\n  background: inherit;\n  border: 1px solid;\n  border-color: inherit;\n  transform: rotate(45deg);\n  z-index: 1300;\n}\n","import { Component, ComponentInterface, h, Prop, State, Element, Watch, Method } from '@stencil/core';\nimport { computePosition, offset, flip, shift, arrow } from '@floating-ui/dom';\n\n/**\n * The TkPopover displays additional information when triggered. By default, it opens when clicked, but can also be configured to open on hover.\n * @slot - Default slot for content without a specific name\n * @slot trigger - The trigger slot defines the element that will trigger the Popover\n * @slot content - Define custom HTML content for the Popover, which replaces the default header, description and icon elements\n * @react `import { TkPopover } from '@takeoff-ui/react'`\n * @vue `import { TkPopover } from '@takeoff-ui/vue'`\n * @angular `import { TkPopover } from '@takeoff-ui/angular'`\n */\n@Component({\n  tag: 'tk-popover',\n  styleUrl: 'tk-popover.scss',\n  shadow: true,\n})\nexport class TkPopover implements ComponentInterface {\n  private popoverElement: HTMLElement;\n  private triggerElement: HTMLElement;\n  private arrowElement: HTMLElement;\n  private cleanup;\n  private dialogRef?: HTMLTkDialogElement;\n\n  @Element() el: HTMLTkPopoverElement;\n\n  @State() isOpen: boolean = false;\n\n  /**\n   * Controls if popover has custom content.\n   * @defaultValue false\n   */\n  @State() hasContentSlot: boolean = false;\n\n  /**\n   * Sets the action of the popover.\n   * @defaultValue 'click'\n   */\n  @Prop() trigger?: 'click' | 'hover' = 'click';\n\n  /**\n   * Sets the position of the popover.\n   * @defaultValue 'right'\n   */\n  @Prop() position?: 'top' | 'top-start' | 'top-end' | 'bottom' | 'bottom-start' | 'bottom-end' | 'left' | 'left-start' | 'left-end' | 'right' | 'right-start' | 'right-end';\n\n  @Watch('position')\n  positionChanged() {\n    if (this.popoverElement) {\n      this.updateArrowPosition();\n    }\n  }\n\n  /**\n   * Sets the type of the popover.\n   * @defaultValue \"white\"\n   */\n  @Prop() type: 'white' | 'dark' | 'basic' = 'basic';\n\n  /**\n   * The style attribute of container element\n   */\n  @Prop() containerStyle?: any = null;\n\n  componentWillLoad() {\n    this.hasContentSlot = !!this.el.querySelector('[slot=\"content\"]');\n  }\n\n  componentDidLoad() {\n    this.triggerElement = this.el.querySelector('[slot=\"trigger\"]');\n    if (this.trigger === 'hover') {\n      this.triggerElement?.addEventListener('mouseenter', () => (this.isOpen = true));\n      this.triggerElement?.addEventListener('mouseleave', () => (this.isOpen = false));\n    } else {\n      this.triggerElement?.addEventListener('click', () => (this.isOpen = !this.isOpen));\n      document.addEventListener('click', this.handleDocumentClick);\n    }\n\n    // dialog içerisindek kullanıldığında dialog içerisinde scroll olduğunda panelin kapanması için yapıldı.\n    this.dialogRef = this.el.closest('tk-dialog');\n    this.dialogRef?.querySelector('.tk-dialog-content')?.addEventListener('scroll', this.handleDialogScroll.bind(this));\n  }\n\n  disconnectedCallback() {\n    if (this.trigger === 'hover') {\n      this.triggerElement?.removeEventListener('mouseenter', () => (this.isOpen = true));\n      this.triggerElement?.removeEventListener('mouseleave', () => (this.isOpen = false));\n    } else {\n      this.triggerElement?.removeEventListener('click', () => (this.isOpen = !this.isOpen));\n      document.removeEventListener('click', this.handleDocumentClick);\n    }\n    this.cleanup && this.cleanup();\n\n    this.dialogRef?.querySelector('.tk-dialog-content')?.removeEventListener('scroll', this.handleDialogScroll.bind(this));\n  }\n\n  componentDidUpdate() {\n    if (this.isOpen) {\n      const updatePosition = () => {\n        if (this.isOpen) {\n          requestAnimationFrame(() => this.updatePosition());\n        }\n      };\n\n      window.addEventListener('scroll', updatePosition, { passive: true });\n      window.addEventListener('resize', updatePosition, { passive: true });\n\n      this.cleanup = () => {\n        window.removeEventListener('scroll', updatePosition);\n        window.removeEventListener('resize', updatePosition);\n      };\n\n      this.updatePosition();\n    } else {\n      this.cleanup && this.cleanup();\n    }\n  }\n\n  /**\n   * Closes the popover\n   */\n  @Method()\n  async close() {\n    this.isOpen = false;\n  }\n\n  // dialog contentindeki scroll'u dinleyip scroll olduğunda panelin kapanması için yapıldı\n  private handleDialogScroll() {\n    if (this.isOpen) {\n      this.isOpen = false;\n    }\n  }\n\n  private updatePosition() {\n    computePosition(this.triggerElement, this.popoverElement, {\n      strategy: 'fixed',\n      placement: this.position,\n      middleware: [offset(8), flip(), shift(), arrow({ element: this.arrowElement })],\n    }).then(({ x, y, middlewareData, placement }) => {\n      Object.assign(this.popoverElement.style, {\n        left: `${x}px`,\n        top: `${y}px`,\n      });\n\n      const { x: arrowX, y: arrowY } = middlewareData.arrow;\n      Object.assign(this.arrowElement.style, {\n        left: arrowX != null ? `${arrowX}px` : '',\n        top: arrowY != null ? `${arrowY}px` : '',\n      });\n\n      const [side] = placement.split('-');\n      this.updateArrowPosition(side);\n    });\n  }\n\n  private updateArrowPosition(side?: string) {\n    const arrowElement = this.arrowElement;\n    switch (side) {\n      case 'top':\n        arrowElement.style.bottom = '-5px';\n        arrowElement.style.borderTop = 'none';\n        arrowElement.style.borderLeft = 'none';\n        break;\n      case 'bottom':\n        arrowElement.style.top = '-5px';\n        arrowElement.style.borderBottom = 'none';\n        arrowElement.style.borderRight = 'none';\n\n        break;\n      case 'left':\n        arrowElement.style.right = '-5px';\n        arrowElement.style.borderBottom = 'none';\n        arrowElement.style.borderLeft = 'none';\n        break;\n      case 'right':\n        arrowElement.style.left = '-5px';\n        arrowElement.style.borderTop = 'none';\n        arrowElement.style.borderRight = 'none';\n        break;\n    }\n  }\n\n  private handleDocumentClick = (e: MouseEvent) => {\n    const isInnerClicked = e.composedPath().some(item => item === this.el);\n    if (!isInnerClicked) {\n      this.isOpen = false;\n    }\n  };\n\n  render() {\n    return (\n      <div class=\"tk-popover\">\n        <slot name=\"trigger\" />\n        {this.isOpen && (\n          <div\n            ref={el => (this.popoverElement = el as HTMLElement)}\n            class={{\n              'tk-popover-content': true,\n              [`tk-popover-${this.type}`]: true,\n            }}\n            style={{ ...this.containerStyle }}\n            role=\"popover\"\n            onClick={e => e.stopPropagation()}\n          >\n            {this.hasContentSlot && <slot name=\"content\" />}\n            <div ref={el => (this.arrowElement = el as HTMLElement)} class=\"tk-popover-arrow\"></div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n"],"version":3}