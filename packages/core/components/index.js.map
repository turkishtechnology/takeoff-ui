{"file":"index.js","mappings":"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","names":[],"sources":["src/utils/toaster.ts"],"sourcesContent":["import { IAlertActionButton } from '../components/tk-alert/interfaces';\n\nexport interface IToast {\n  position?: string;\n  header?: string;\n  message?: string;\n  alignItems?: 'start' | 'center' | 'end';\n  actions?: IAlertActionButton[];\n  variant: 'success' | 'warning' | 'info' | 'danger' | 'neutral';\n  icon?: string;\n  iconSize?: 'small' | 'base' | 'large';\n  type: 'filled' | 'filledlight' | 'outlined' | 'gradient';\n  removable?: boolean;\n  timeout?: number;\n  persistentId?: string;\n  persistent?: boolean;\n}\n\nconst persistentToasts: Map<\n  string,\n  {\n    element: HTMLTkAlertElement;\n    container: HTMLDivElement;\n    isRemoving: boolean;\n  }\n> = new Map();\n\nexport const createToast = (options: IToast) => {\n  if (!['top-right', 'bottom-right', 'bottom-left', 'top-left'].includes(options.position)) options.position = 'top-right';\n  if (options?.timeout == null) options.timeout = 6000;\n\n  let toaster = document.querySelector(`.tk-toaster.${options.position}`);\n\n  if (!toaster) {\n    toaster = document.createElement('div');\n    toaster.classList.add('tk-toaster');\n    toaster.classList.add(options.position);\n\n    document.querySelector('body').append(toaster);\n  }\n\n  const tkAlert: HTMLTkAlertElement = document.createElement('tk-alert');\n  if (options.header?.length > 0) tkAlert.header = options.header;\n  if (options.message?.length > 0) tkAlert.message = options.message;\n  tkAlert.setAttribute('type', options.type);\n  tkAlert.setAttribute('variant', options.variant);\n  if (options.alignItems?.length > 0) tkAlert.alignItems = options.alignItems;\n  if (options.icon?.length > 0) tkAlert.icon = options.icon;\n  if (options.iconSize?.length > 0) tkAlert.iconSize = options.iconSize;\n  if (options.removable) tkAlert.removable = options.removable;\n  if (options.actions?.length > 0) {\n    const slotFooterAction = document.createElement('div');\n    slotFooterAction.setAttribute('slot', 'footer-action');\n    slotFooterAction.style.display = 'flex';\n    slotFooterAction.style.gap = '8px';\n\n    options.actions.forEach(item => {\n      const button = document.createElement('tk-button');\n      button.label = item.label;\n      button.icon = item.icon;\n      button.variant = item.variant || 'primary';\n      button.type = item.type || 'filled';\n      button.size = item.size || 'base';\n      if (typeof item.action == 'function') button.addEventListener('tk-click', () => item.action());\n\n      slotFooterAction.appendChild(button);\n    });\n\n    tkAlert.appendChild(slotFooterAction);\n  }\n\n  const toast = document.createElement('div');\n  toast.classList.add('tk-toast');\n  toaster.append(toast);\n  toast.append(tkAlert);\n\n  setTimeout(() => {\n    toast.classList.add('open');\n  }, 1);\n\n  if (!options.persistent) {\n    setTimeout(() => {\n      toast.classList.remove('open');\n      setTimeout(() => {\n        tkAlert.remove();\n        toast.remove();\n      }, 300);\n    }, options.timeout);\n  }\n};\n\nexport const showPersistentToast = (options: IToast & { persistentId: string }) => {\n  const { persistentId } = options;\n\n  const existingToast = persistentToasts.get(persistentId);\n  if (existingToast) {\n    if (existingToast.isRemoving) {\n      return false;\n    }\n\n    existingToast.isRemoving = true;\n\n    const { container } = existingToast;\n    container.classList.remove('open');\n\n    setTimeout(() => {\n      if (container.parentNode) {\n        container.remove();\n      }\n      persistentToasts.delete(persistentId);\n    }, 300);\n\n    return false;\n  }\n\n  const toastOptions = {\n    ...options,\n    persistent: true,\n    removable: true,\n  };\n\n  if (!['top-right', 'bottom-right', 'bottom-left', 'top-left'].includes(toastOptions.position)) {\n    toastOptions.position = 'top-right';\n  }\n\n  let toaster = document.querySelector(`.tk-toaster.${toastOptions.position}`);\n\n  if (!toaster) {\n    toaster = document.createElement('div');\n    toaster.classList.add('tk-toaster');\n    toaster.classList.add(toastOptions.position);\n    document.querySelector('body').append(toaster);\n  }\n\n  const tkAlert: HTMLTkAlertElement = document.createElement('tk-alert');\n  if (toastOptions.header?.length > 0) tkAlert.header = toastOptions.header;\n  if (toastOptions.message?.length > 0) tkAlert.message = toastOptions.message;\n  tkAlert.setAttribute('type', toastOptions.type);\n  tkAlert.setAttribute('variant', toastOptions.variant);\n  if (toastOptions.alignItems?.length > 0) tkAlert.alignItems = toastOptions.alignItems;\n  if (toastOptions.icon?.length > 0) tkAlert.icon = toastOptions.icon;\n  if (toastOptions.iconSize?.length > 0) tkAlert.iconSize = toastOptions.iconSize;\n  if (toastOptions.removable) tkAlert.removable = toastOptions.removable;\n\n  if (toastOptions.actions?.length > 0) {\n    const slotFooterAction = document.createElement('div');\n    slotFooterAction.setAttribute('slot', 'footer-action');\n    slotFooterAction.style.display = 'flex';\n    slotFooterAction.style.gap = '8px';\n\n    toastOptions.actions.forEach(item => {\n      const button = document.createElement('tk-button');\n      button.label = item.label;\n      button.icon = item.icon;\n      button.variant = item.variant || 'primary';\n      button.type = item.type || 'filled';\n      button.size = item.size || 'base';\n      if (typeof item.action == 'function') button.addEventListener('tk-click', () => item.action());\n\n      slotFooterAction.appendChild(button);\n    });\n\n    tkAlert.appendChild(slotFooterAction);\n  }\n\n  const toast = document.createElement('div');\n  toast.classList.add('tk-toast');\n  toaster.append(toast);\n  toast.append(tkAlert);\n\n  persistentToasts.set(persistentId, {\n    element: tkAlert,\n    container: toast,\n    isRemoving: false,\n  });\n\n  tkAlert.addEventListener('remove', () => {\n    const toastData = persistentToasts.get(persistentId);\n    if (toastData && !toastData.isRemoving) {\n      persistentToasts.delete(persistentId);\n    }\n  });\n\n  setTimeout(() => {\n    toast.classList.add('open');\n  }, 1);\n\n  return true;\n};\n\nexport const isPersistentToastVisible = (persistentId: string): boolean => {\n  const toast = persistentToasts.get(persistentId);\n  return toast ? !toast.isRemoving : false;\n};\n\nexport const dismissAllPersistentToasts = (): void => {\n  persistentToasts.forEach(({ container, isRemoving }, persistentId) => {\n    if (!isRemoving) {\n      const toastData = persistentToasts.get(persistentId);\n      if (toastData) {\n        toastData.isRemoving = true;\n      }\n\n      container.classList.remove('open');\n      setTimeout(() => {\n        if (container.parentNode) {\n          container.remove();\n        }\n        persistentToasts.delete(persistentId);\n      }, 300);\n    }\n  });\n};\n"],"version":3}